/**
 * IFC Design System - SCSS Mixins e Utilitários
 * Mixins reutilizáveis baseados nos design tokens
 */

/* ==========================================
 * MIXINS DE COMPONENTES
 * ========================================== */

/**
 * Mixin para reset de botão/input
 */
@mixin ifc-reset-button {
  background: transparent;
  border: none;
  margin: 0;
  padding: 0;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  cursor: pointer;
  outline: none;
  
  &:focus {
    outline: var(--ifc-border-width-2) solid var(--ifc-color-border-focus);
    outline-offset: var(--ifc-border-width-1);
  }
}

/**
 * Mixin para estados de foco acessíveis
 */
@mixin ifc-focus-ring($color: var(--ifc-color-border-focus)) {
  outline: var(--ifc-border-width-2) solid $color;
  outline-offset: var(--ifc-border-width-1);
  box-shadow: var(--ifc-shadow-focus);
}

/**
 * Mixin para transições consistentes
 */
@mixin ifc-transition($property: all, $duration: var(--ifc-duration-150)) {
  transition: $property $duration var(--ifc-ease-in-out);
  
  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

/**
 * Mixin para espaçamento interno de componentes
 */
@mixin ifc-component-padding($size: md) {
  @if $size == sm {
    padding: var(--ifc-space-2) var(--ifc-space-3);
  } @else if $size == md {
    padding: var(--ifc-space-3) var(--ifc-space-4);
  } @else if $size == lg {
    padding: var(--ifc-space-4) var(--ifc-space-6);
  }
}

/**
 * Mixin para bordas arredondadas
 */
@mixin ifc-rounded($size: base) {
  @if $size == sm {
    border-radius: var(--ifc-radius-sm);
  } @else if $size == base {
    border-radius: var(--ifc-radius-base);
  } @else if $size == md {
    border-radius: var(--ifc-radius-md);
  } @else if $size == lg {
    border-radius: var(--ifc-radius-lg);
  } @else if $size == xl {
    border-radius: var(--ifc-radius-xl);
  } @else if $size == full {
    border-radius: var(--ifc-radius-full);
  }
}

/**
 * Mixin para sombras
 */
@mixin ifc-shadow($size: base) {
  @if $size == sm {
    box-shadow: var(--ifc-shadow-sm);
  } @else if $size == base {
    box-shadow: var(--ifc-shadow-base);
  } @else if $size == md {
    box-shadow: var(--ifc-shadow-md);
  } @else if $size == lg {
    box-shadow: var(--ifc-shadow-lg);
  } @else if $size == xl {
    box-shadow: var(--ifc-shadow-xl);
  } @else if $size == inner {
    box-shadow: var(--ifc-shadow-inner);
  } @else if $size == none {
    box-shadow: var(--ifc-shadow-none);
  }
}

/**
 * Mixin para tipografia
 */
@mixin ifc-text($size: base, $weight: normal, $line-height: normal) {
  font-family: var(--ifc-font-family-primary);
  
  @if $size == xs {
    font-size: var(--ifc-font-size-xs);
  } @else if $size == sm {
    font-size: var(--ifc-font-size-sm);
  } @else if $size == base {
    font-size: var(--ifc-font-size-base);
  } @else if $size == lg {
    font-size: var(--ifc-font-size-lg);
  } @else if $size == xl {
    font-size: var(--ifc-font-size-xl);
  } @else if $size == 2xl {
    font-size: var(--ifc-font-size-2xl);
  } @else if $size == 3xl {
    font-size: var(--ifc-font-size-3xl);
  } @else if $size == 4xl {
    font-size: var(--ifc-font-size-4xl);
  }
  
  @if $weight == thin {
    font-weight: var(--ifc-font-weight-thin);
  } @else if $weight == light {
    font-weight: var(--ifc-font-weight-light);
  } @else if $weight == normal {
    font-weight: var(--ifc-font-weight-normal);
  } @else if $weight == medium {
    font-weight: var(--ifc-font-weight-medium);
  } @else if $weight == semibold {
    font-weight: var(--ifc-font-weight-semibold);
  } @else if $weight == bold {
    font-weight: var(--ifc-font-weight-bold);
  }
  
  @if $line-height == none {
    line-height: var(--ifc-line-height-none);
  } @else if $line-height == tight {
    line-height: var(--ifc-line-height-tight);
  } @else if $line-height == normal {
    line-height: var(--ifc-line-height-normal);
  } @else if $line-height == relaxed {
    line-height: var(--ifc-line-height-relaxed);
  }
}



/**
 * Mixin para cards/containers
 */
@mixin ifc-card {
  background-color: var(--ifc-color-bg-primary);
  border: var(--ifc-border-width-1) solid var(--ifc-border-default);
  @include ifc-rounded(lg);
  @include ifc-shadow(base);
  padding: var(--ifc-card-padding);
}

/**
 * Mixin para estados de loading/skeleton
 */
@mixin ifc-skeleton {
  background: linear-gradient(
    90deg,
    var(--ifc-bg-secondary) 25%,
    var(--ifc-bg-tertiary) 50%,
    var(--ifc-bg-secondary) 75%
  );
  background-size: 200% 100%;
  animation: ifc-skeleton-loading 1.5s infinite;
  
  @media (prefers-reduced-motion: reduce) {
    animation: none;
    background: var(--ifc-color-bg-secondary);
  }
}

@keyframes ifc-skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* ==========================================
 * UTILITÁRIOS DE LAYOUT
 * ========================================== */

/**
 * Mixin para flex layouts
 */
@mixin ifc-flex($direction: row, $align: stretch, $justify: flex-start, $wrap: nowrap) {
  display: flex;
  flex-direction: $direction;
  align-items: $align;
  justify-content: $justify;
  flex-wrap: $wrap;
}

/**
 * Mixin para grid layouts
 */
@mixin ifc-grid($columns: 1, $gap: var(--ifc-space-4)) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
}

/**
 * Mixin para container responsivo
 */
@mixin ifc-container($size: lg) {
  width: 100%;
  margin: 0 auto;
  padding: 0 var(--ifc-space-4);
  
  @if $size == sm {
    max-width: var(--ifc-container-sm);
  } @else if $size == md {
    max-width: var(--ifc-container-md);
  } @else if $size == lg {
    max-width: var(--ifc-container-lg);
  } @else if $size == xl {
    max-width: var(--ifc-container-xl);
  } @else if $size == 2xl {
    max-width: var(--ifc-container-2xl);
  }
}

/**
 * Mixin para visually hidden (acessibilidade)
 */
@mixin ifc-visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/**
 * Mixin para truncate text
 */
@mixin ifc-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/**
 * Mixin para line clamp
 */
@mixin ifc-line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ==========================================
 * BREAKPOINTS RESPONSIVOS
 * ========================================== */

@mixin ifc-responsive($breakpoint) {
  @if $breakpoint == sm {
    @media (min-width: 640px) { @content; }
  } @else if $breakpoint == md {
    @media (min-width: 768px) { @content; }
  } @else if $breakpoint == lg {
    @media (min-width: 1024px) { @content; }
  } @else if $breakpoint == xl {
    @media (min-width: 1280px) { @content; }
  } @else if $breakpoint == 2xl {
    @media (min-width: 1536px) { @content; }
  }
}

/* ==========================================
 * CLASSES UTILITÁRIAS
 * ========================================== */

.ifc-sr-only {
  @include ifc-visually-hidden;
}

.ifc-truncate {
  @include ifc-truncate;
}

.ifc-focus-ring {
  &:focus-visible {
    @include ifc-focus-ring;
  }
}